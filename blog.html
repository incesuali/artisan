<!DOCTYPE html>
<html lang="fr">
<head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MH5CT2K8');</script>
    <!-- End Google Tag Manager -->
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Primary Meta Tags -->
    <title>Blog Parquet - Articles et Conseils | Artisan Parqueteur Nord</title>
    <meta name="title" content="Blog Parquet - Articles et Conseils | Artisan Parqueteur Nord">
    <meta name="description" content="D√©couvrez nos articles de blog sur le parquet : pose, r√©novation, entretien, types de parquet (massif, contrecoll√©, stratifi√©) dans le Nord de la France. Conseils d'expert.">
    <meta name="keywords" content="Artisan parqueteur Nord, Pose de parquet Lille, R√©novation de parquet ancien, Pon√ßage et vitrification de parquet, Parqueteur professionnel 59, Pose de parquet massif, Pose de parquet contrecoll√©, Pose de sol stratifi√©, R√©paration de parquet ab√Æm√©, Pose de parquet flottant, Entretien et huilage de parquet, Devis pose parquet gratuit, Parqueteur Valenciennes, Pose de parquet Roubaix, Artisan sol bois Tourcoing, R√©novation escalier en bois, Pose de parquet salle de bain, Prix pose parquet m2 Nord, Sp√©cialiste parquet ch√™ne, Pose de plinthes, blog parquet, conseil parquet">
    <meta name="author" content="Artisan Parqueteur Nord">
    <!-- ‚ö†Ô∏è TEMPORARILY BLOCKED: noindex, nofollow - Domain change in progress. TODO: Change back to "index, follow" when new domain is ready -->
    <meta name="robots" content="noindex, nofollow">
    <meta name="language" content="French">
    <link rel="canonical" href="https://artisanparqueteurnord.xyz/blog.html">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://artisanparqueteurnord.xyz/blog.html">
    <meta property="og:title" content="Blog Parquet - Articles et Conseils | Artisan Parqueteur Nord">
    <meta property="og:description" content="Articles et conseils d'expert sur le parquet : pose, r√©novation, entretien dans le Nord de la France.">
    <meta property="og:image" content="https://artisanparqueteurnord.xyz/images/Gemini_Generated_Image_aehbrgaehbrgaehb.png">
    <meta property="og:locale" content="fr_FR">
    <meta property="og:site_name" content="Artisan Parqueteur Nord">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://artisanparqueteurnord.xyz/blog.html">
    <meta property="twitter:title" content="Blog Parquet - Articles et Conseils | Artisan Parqueteur Nord">
    <meta property="twitter:description" content="Articles et conseils d'expert sur le parquet dans le Nord de la France.">
    <meta property="twitter:image" content="https://artisanparqueteurnord.xyz/images/Gemini_Generated_Image_aehbrgaehbrgaehb.png">
    
    <!-- Hreflang -->
    <link rel="alternate" hreflang="fr-FR" href="https://artisanparqueteurnord.xyz/blog.html">
    <link rel="alternate" hreflang="x-default" href="https://artisanparqueteurnord.xyz/blog.html">
    
    <!-- Font Loading Optimization -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet"></noscript>
    <link rel="stylesheet" href="style.css">
    
    <!-- Structured Data - Blog -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Blog",
      "name": "Blog Artisan Parqueteur Nord",
      "description": "Articles et conseils d'expert sur l'artisan parqueteur Nord, pose de parquet Lille, r√©novation de parquet ancien, pon√ßage et vitrification de parquet, pose de parquet massif, contrecoll√©, sol stratifi√©, parquet flottant. R√©paration de parquet ab√Æm√©, entretien et huilage de parquet, r√©novation escalier en bois, pose de parquet salle de bain, pose de plinthes. Devis pose parquet gratuit √† Valenciennes, Roubaix, Tourcoing.",
      "url": "https://artisanparqueteurnord.xyz/blog.html",
      "publisher": {
        "@type": "LocalBusiness",
        "name": "Artisan Parqueteur Nord",
        "url": "https://artisanparqueteurnord.xyz"
      },
      "inLanguage": "fr-FR"
    }
    </script>
    
    <link rel="stylesheet" href="style.css">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5Z3M609QKT"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-5Z3M609QKT');
    </script>
    <style>
        .blog-page-container {
            min-height: calc(100vh - 120px);
            padding: 20px 15px 40px;
        }
        
        .blog-page-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .blog-page-title {
            font-size: 24px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .back-to-home {
            display: inline-block;
            padding: 8px 16px;
            background: rgba(0, 0, 0, 0.3);
            color: #ffffff;
            text-decoration: none;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
            border: 1px solid #333333;
            margin-top: 10px;
        }
        
        .back-to-home:hover {
            background: rgba(0, 0, 0, 0.5);
            transform: translateY(-2px);
        }
        
        .blog-posts-container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .blog-post-preview {
            margin-bottom: 8px;
            background: rgba(0, 0, 0, 0.3) !important;
            padding: 12px 16px;
            border-radius: 8px;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
            border: 1px solid #333333;
            transition: all 0.3s ease;
            animation: slideUp 0.5s ease-out forwards;
            opacity: 0;
        }
        
        .blog-post-preview:nth-child(1) { animation-delay: 0.1s; }
        .blog-post-preview:nth-child(2) { animation-delay: 0.15s; }
        .blog-post-preview:nth-child(3) { animation-delay: 0.2s; }
        .blog-post-preview:nth-child(4) { animation-delay: 0.25s; }
        .blog-post-preview:nth-child(5) { animation-delay: 0.3s; }
        
        .blog-post-preview:hover {
            background: rgba(0, 0, 0, 0.4) !important;
            transform: translateX(5px);
            border-color: rgba(255, 255, 255, 0.4);
        }
        
        .blog-post-title {
            font-size: 16px;
            font-weight: 500;
            color: #ffffff;
            margin: 0;
            line-height: 1.4;
        }
        
        .blog-post-link {
            color: #ffffff;
            text-decoration: none;
            transition: color 0.3s ease;
            display: block;
            width: 100%;
        }
        
        .blog-post-link:hover {
            color: #74b9ff;
        }
        
        .no-blogs {
            text-align: center;
            padding: 40px 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 16px;
            border: 1px solid #333333;
        }
        
        .no-blogs-text {
            font-size: 16px;
            color: #ffffff;
        }
        
        @media (max-width: 768px) {
            .blog-page-container {
                padding: 15px 12px 30px;
            }
            
            .blog-page-title {
                font-size: 20px;
                margin-bottom: 8px;
            }
            
            .back-to-home {
                padding: 6px 12px;
                font-size: 13px;
            }
            
            .blog-post-title {
                font-size: 14px;
            }
            
            .blog-post-preview {
                padding: 8px 12px;
                margin-bottom: 6px;
                border-radius: 6px;
            }
        }
    </style>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MH5CT2K8"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <div class="container">
        <!-- Ba≈ülƒ±k -->
        <header class="header">
            <h1>Artisan Parqueteur Nord</h1>
            <p class="tagline">Le parquet, rien que le parquet.</p>
        </header>
        
        <div class="blog-page-container">
            <div class="blog-page-header">
                <h2 class="blog-page-title">Blog</h2>
                <a href="index.html" class="back-to-home">‚Üê Retour √† l'accueil</a>
            </div>
            
            <div class="blog-posts-container" id="blog-posts-container">
                <!-- Blog yazƒ±larƒ± buraya dinamik olarak eklenecek -->
            </div>
        </div>
    </div>

    <script>
        // Blog yazƒ±larƒ±nƒ± y√ºkle ve g√∂ster (Vercel Blob Storage'dan veya localStorage'dan)
        async function loadBlogPosts() {
            const container = document.getElementById('blog-posts-container');
            
            let blogPosts = [];
            
            // √ñnce Vercel Blob Storage'dan y√ºkle (SADECE BLOB STORAGE - localStorage'a g√ºvenme!)
            // Cache'i bypass etmek i√ßin timestamp ekle
            try {
                console.log('üîç Vercel Blob Storage\'dan blog yazƒ±larƒ± y√ºkleniyor...');
                const timestamp = Date.now(); // Cache bypass i√ßin timestamp
                const response = await fetch(`/api/blog-posts?t=${timestamp}`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'Cache-Control': 'no-cache, no-store, must-revalidate',
                        'Pragma': 'no-cache',
                        'Expires': '0'
                    },
                    cache: 'no-store', // Cache'i tamamen bypass et
                    credentials: 'omit'
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status} - ${response.statusText}`);
                }
                
                const data = await response.json();
                console.log('üì¶ API Response:', data);
                console.log('üìÖ API Timestamp:', data.timestamp);
                console.log('üìä Blog Yazƒ± Sayƒ±sƒ± (API):', data.count || data.posts?.length || 0);
                
                if (data.success && data.posts && Array.isArray(data.posts)) {
                    blogPosts = data.posts;
                    console.log('‚úÖ Blog yazƒ±larƒ± Vercel Blob Storage\'dan y√ºklendi:', blogPosts.length, 'yazƒ±');
                    
                    // Blog yazƒ±larƒ±nƒ± console'da g√∂ster (debug i√ßin)
                    if (blogPosts.length > 0) {
                        console.log('üìù Blog yazƒ±larƒ±:', blogPosts.map(p => ({ id: p.id, title: p.title, date: p.date })));
                    }
                    
                    // localStorage'a da kaydet (sadece cache i√ßin, g√ºvenilir kaynak Blob Storage)
                    if (blogPosts.length > 0) {
                        localStorage.setItem('blogPosts', JSON.stringify(blogPosts));
                        console.log('üíæ Blog yazƒ±larƒ± localStorage\'a cache olarak kaydedildi');
                    }
                } else {
                    console.warn('‚ö†Ô∏è API ba≈üarƒ±lƒ± ama posts array bulunamadƒ± veya bo≈ü:', data);
                    if (!data.success) {
                        console.error('‚ùå API Error:', data.error);
                    }
                }
            } catch (error) {
                console.error('‚ùå Vercel Blob Storage\'dan y√ºkleme hatasƒ±:', error);
                console.error('Error details:', error.message);
                console.error('Error stack:', error.stack);
                
                // Hata durumunda localStorage'dan y√ºkle (fallback)
                console.log('üîÑ Fallback: localStorage\'dan y√ºkleniyor...');
            }
            
            // Vercel Blob Storage'da yoksa veya hata varsa, localStorage'dan y√ºkle
            if (blogPosts.length === 0) {
                const localPosts = JSON.parse(localStorage.getItem('blogPosts') || '[]');
                blogPosts = localPosts;
                console.log('‚úÖ Blog yazƒ±larƒ± localStorage\'dan y√ºklendi:', blogPosts.length);
                
                // Eƒüer localStorage'da varsa ama Vercel Blob Storage'da yoksa, senkronize et
                if (blogPosts.length > 0) {
                    console.log('üí° localStorage\'da blog yazƒ±larƒ± var, Vercel Blob Storage\'a senkronize ediliyor...');
                    try {
                        const syncResponse = await fetch('/api/blog-posts', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({ posts: blogPosts }),
                        });
                        const syncData = await syncResponse.json();
                        if (syncData.success) {
                            console.log('‚úÖ Blog yazƒ±larƒ± Vercel Blob Storage\'a senkronize edildi!');
                        }
                    } catch (syncError) {
                        console.error('‚ö†Ô∏è Senkronizasyon hatasƒ±:', syncError);
                    }
                }
            }
            
            if (blogPosts.length === 0) {
                container.innerHTML = `
                    <div class="no-blogs">
                        <p class="no-blogs-text">Aucun article de blog pour le moment.</p>
                        <p style="margin-top: 15px; font-size: 14px; color: #999;">
                            Pour ajouter des articles, utilisez le panneau d'administration.
                        </p>
                    </div>
                `;
                console.warn('‚ö†Ô∏è Hi√ß blog yazƒ±sƒ± bulunamadƒ±. Admin panelinden blog yazƒ±sƒ± ekleyin.');
                return;
            }
            
            // Tarihe g√∂re sƒ±rala (en yeni √ºstte)
            blogPosts.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            container.innerHTML = blogPosts.map(post => {
                // SEO i√ßin slug olu≈ütur (ba≈ülƒ±ktan)
                const slug = post.title.toLowerCase()
                    .replace(/[^a-z0-9]+/g, '-')
                    .replace(/^-+|-+$/g, '');
                
                const postUrl = `blog-post.html?id=${post.id}&slug=${encodeURIComponent(slug)}`;
                
                return `
                    <article class="blog-post-preview" itemscope itemtype="https://schema.org/BlogPosting">
                        <h2 class="blog-post-title" itemprop="headline">
                            <a href="${postUrl}" class="blog-post-link" itemprop="url">${escapeHtml(post.title)}</a>
                        </h2>
                        <meta itemprop="datePublished" content="${post.date}">
                        <meta itemprop="author" content="Artisan Parqueteur Nord">
                    </article>
                `;
            }).join('');
        }
        
        // HTML escape
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        // Tarihi formatla
        function formatDate(dateString) {
            const date = new Date(dateString);
            const options = { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            return date.toLocaleDateString('fr-FR', options);
        }
        
        // Blog yazƒ±larƒ± g√ºncellendiƒüinde sayfayƒ± yenile
        window.addEventListener('blogPostsUpdated', function(event) {
            console.log('üì¢ Blog g√ºncelleme eventi alƒ±ndƒ±:', event.detail);
            console.log('üîÑ Blog yazƒ±larƒ± yeniden y√ºkleniyor...');
            // 2 saniye bekle (Vercel Blob Storage'ƒ±n g√ºncellenmesi i√ßin)
            setTimeout(() => {
                loadBlogPosts().catch(err => {
                    console.error('Blog yazƒ±larƒ± yeniden y√ºklenirken hata:', err);
                });
            }, 2000);
        });
        
        // Sayfa y√ºklendiƒüinde
        document.addEventListener('DOMContentLoaded', function() {
            loadBlogPosts().catch(err => {
                console.error('Blog yazƒ±larƒ± y√ºklenirken hata:', err);
                const container = document.getElementById('blog-posts-container');
                if (container) {
                    container.innerHTML = `
                        <div class="no-blogs">
                            <p class="no-blogs-text">Erreur lors du chargement des articles.</p>
                        </div>
                    `;
                }
            });
        });
        
        // Her 30 saniyede bir kontrol et (yeni blog yazƒ±larƒ± i√ßin)
        setInterval(function() {
            console.log('üîÑ Otomatik kontrol: Blog yazƒ±larƒ± kontrol ediliyor...');
            loadBlogPosts().catch(err => {
                console.error('Otomatik kontrol hatasƒ±:', err);
            });
        }, 30000); // 30 saniye
    </script>
</body>
</html>

